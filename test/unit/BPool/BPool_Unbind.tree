BPool_Unbind::whenReentrancyLockIsNOTSet
├── when caller is NOT controller
│   └── it should revert
└── when caller is controller
    ├── when token is not bound
    │   └── it should revert
    └── when token is bound
        ├── when pool is finalized
        │   └── it should revert
        ├── when token is last on the tokens array
        │   ├── it sets reentrancy lock
        │   ├── it emits LOG_CALL event
        │   ├── it calls _pushUnderlying
        │   ├── it removes the token record
        │   ├── it decreases the total weight
        │   └── it pops from the array
        └── when token is NOT last on the tokens array
            ├── it removes the token record
            ├── it removes the token from the array
            ├── it keeps other tokens in the array
            └── it updates records to point to the correct indices

BPool_Unbind::whenReentrancyLockIsSet
└── it should revert
